<!-- Generated by Harlequin WebMaker 2.3.1 (16-Oct-1996)Macintosh Common Lisp Version 4.0 --><HTML> <HEAD><TITLE>Summary of Sound</TITLE></HEAD><BODY><A NAME=HEADING332></A><CENTER>     <IMG BORDER="0" SRC="../../../../images/level3.gif" ALT="Title Banner"      ISMAP USEMAP="#level3">     <BR>     <MAP NAME="level3">     <!-- Find It -->     <AREA SHAPE="RECT" COORDS="7, 9, 69, 30" HREF="../../../../find.html">     <!-- Main -->     <AREA SHAPE="RECT" COORDS="432, 9, 492, 30" HREF="../../../../devworld.shtml">     </MAP><P><A HREF="NPG2-331.html"><IMG ALIGN = BOTTOM SRC = "graphics/prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="NPG2-2.html"><IMG ALIGN = BOTTOM SRC = "graphics/content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="NPG2-443.html"><IMG ALIGN = BOTTOM SRC = "graphics/index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="NPG2-333.html"><IMG ALIGN = BOTTOM SRC = "graphics/next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P><FONT SIZE=-1><DL><DT><A HREF="../../techinfo.html"><B>Newton Developer Technical Information:</B></A> <A HREF="NPG2-2.html"><B>Newton Programmer's Guide: 2.1 OS Addendum</B></A> / <BR><DD><A HREF="NPG2-262.html"><B>Chapter 7 - Sound</B></A></DL></FONT><P><HR><BLOCKQUOTE><A NAME=HEADING332-0></A><H1>Summary of Sound</H1><A NAME=HEADING332-1></A><H2>Constants</H2><PRE><P> kDefaultDevice // 0x00. Default input or output device<P>kInternalSpeaker // 0x01. Internal speakerkInternalMic   // 0x04. Internal microphonekLineOut       // 0x08. Line out on the interconnect buskLineIn        // 0x10. Line in on the interconnect buskSampleStandard // 0. Uncompressed 8-bit sampleskSampleMuLaw   // 1. 8-bit samples encoded by the muLaw compressorkSampleLinear  // 6. Uncompressed 16-bit samplesk8Bit  // 8. Samples are 8 bits eachk16Bit // 16. Samples are 16 bits each&quot;TMuLawCodec&quot; // MuLaw codec&quot;TIMACodec&quot;   // IMA codec&quot;TGSMCodec&quot;   // GSM codec&quot;TDTMFCodec&quot;  // Synthesizer codec</PRE><A NAME=HEADING332-19></A><H2><A NAME=MARKER-10-230></A>Data Structures</H2><A NAME=HEADING332-20></A><H3>Sound Frame</H3><PRE><P> soundFrame := {<P>sndFrameType: <I>symbol</I>, // 'simpleSound or 'codeccodecName: <I>string</I>, // codec identifierbufferCount: <I>integer</I>, // number of codec buffersbufferSize: <I>integer</I>, // bytes in each codec buffersamples: <I>binary</I>, // sound samples or synthesizer datasamplingRate: <I>realOrInteger</I>, // sampling rate per secondcompressionType: <I>integer</I>, // encoding format of datacompressionRatio: <I>real</I>, // ratio of samples to bytesdataType: <I>integer</I>, // sample size (8 or 16 bits)volume: <I>realOrInteger</I>, // volume levelstart: <I>integer</I>, // index of first sample to playcount: <I>integer</I>, // number of samples to playloops: <I>integer</I>, // number of times to repeat soundCallback: func(<I>state</I>, <I>result</I>)..., // called when play/record finishes }<P><P></PRE><A NAME=HEADING332-37></A><H3>Sound Result Frame</H3><PRE><P> soundResultFrame := {<P>sound: <I>frame</I>, // sound frame that was paused or stoppedindex: <I>integer</I>, // index into sample data where stopped }<P><P></PRE><A NAME=HEADING332-42></A><H3>User Configuration Variables</H3><PRE><P> inputGain // default input gain used during recording<P>inputDevice // default input device used for recordingoutputDevice // default output device used for playbacksoundVolumeDb // current system sound volume, in decibels alarmVolumeDb // current system alarm volume, in decibels<P><P></PRE><A NAME=HEADING332-48></A><H3>Synthesized Sound Data Format</H3><PRE><P> type 'DTMF' {<P>unsigned integer; /* Parameter block type. Set to 1 */unsigned integer; /* Synthesis type (1-5) */unsigned integer; /* Reserved set to 0 */unsigned integer; /* Synth loop count */unsigned integer = $$CountOf(DTMFTones); /* Number of tone blocks */   wide array DTMFTones {   unsigned integer; /* frequency integer part */   unsigned integer; /* frequency fractional part */   unsigned integer; /* sustain amplitude */   unsigned integer; /* leading silence in ms */   unsigned integer; /* attack in ms */   unsigned integer; /* decay in ms */   unsigned integer; /* sustain in ms */   unsigned integer; /* release in ms */   unsigned integer; /* peak amplitude */   unsigned integer; /* trailing silence in ms */   }; };<P><P></PRE><A NAME=HEADING332-68></A><H3>soundRecorder Object</H3><PRE><P> sr := GetRoot().soundRecorder;<P>sr := {fSoundFrameSlots: <I>frame</I>, // sound frame overrides for recordingfInputGain: <I>integer</I>, // sets inputGain slot in the sound channelfInputDevice: <I>integer</I>, // sets inputDevice slot in the sound channelfOutputDevice: <I>integer</I>, // sets outputDevice slot in the sound channelfCallback: func(<I>array</I>)..., // returns sounds when recorder is closedOpenRecord: func(<I>callback</I>)..., // opens sound recorder for recordingOpenPlay: func(<I>soundFrame</I>)..., // opens sound recorder for playing }<P><P></PRE><A NAME=HEADING332-79></A><H2>Protos</H2><A NAME=HEADING332-80></A><H3>protoRecorderView</H3><PRE><P> aProtoRecorderView := {<P>_proto: protoRecorderView,elapsedTime: <I>integer</I>, // seconds of recorded soundstatusText: {<I>   SetState: func(oldState</I>, <I>newState</I>, <I>hasSound</I>)..., // state changed   }GetSounds: func()..., // gets array of sound frames }<P><P></PRE><A NAME=HEADING332-89></A><H3>protoSoundChannel</H3><PRE><P> aProtoSoundChannel := {<P>_proto: protoSoundChannel,direction: <I>symbol</I>, // 'record or 'playoutputDevice: <I>integer</I>, // output device identifierinputDevice: <I>integer</I>, // input device identifierinputGain: <I>integer</I>, // 0-255 or nil (default is used)inputBlockSize: <I>integer</I>, // VBO size in bytes, for recordingClose: func()..., // closes open sound channelGetInputGain: func()..., // gets input gain settingGetVolume: func()..., // gets volume settingIsActive: func()..., // is channel active?IsOpen: func()..., // is channel open?IsPaused: func()..., // is channel paused?NewInputBlock: func(<I>Callback</I>)..., // creates new sound frame/VBONewRecording: func()..., // creates new sound channel for recordingOpen: func()..., // opens channelPause: func()..., // pauses channelSchedule: func(<I>soundFrame</I>)..., // schedules sound frameSetInputGain: func(<I>gain</I>)..., // sets input gainSetVolume: func(<I>volume</I>)..., // sets volumeStart: func(<I>async</I>)..., // starts channel playing/recordingStop: func()..., // stops channel playing/recording }<P><P></PRE><A NAME=HEADING332-113></A><H3>protoSoundFrame</H3><PRE><P> aProtoSoundFrame := {<P>_proto: protoSoundFrame,length: <I>integer</I>, // number of samples in samples slotGetPlayingTime: func()..., // returns playing time in secondsGetSampleCount: func()..., // returns number of samplesGetSampleSize: func()..., // returns size of each sample in bytesGetSamplingRate: func()..., // returns sampling rateSetRecordingLength: func(<I>numSamples</I>, <I>Callback</I>)..., // sets VBO size }<P><P></PRE><A NAME=HEADING332-123></A><H2>Functions</H2><PRE><P> GetRegisteredSound(<I>symbol</I>)<P>PlaySound(<I>soundFrame</I>)PlaySoundEffect(<I>soundFrame</I>, <I>volume</I>, <I>type</I>)RegSound(<I>symbol</I>, <I>soundFrame</I>)SoundList()UnRegSound(<I>symbol</I>)</PRE> <A NAME=MARKER-10-231></A><P><HR><B>Subtopics</B><B><!-- TOC --><DL><DT><A HREF="NPG2-332.html#HEADING332-1">Constants</A><DD><DT><A HREF="NPG2-332.html#HEADING332-19">Data Structures</A><DD><DT><A HREF="NPG2-332.html#HEADING332-20">Sound Frame</A><DD><DT><A HREF="NPG2-332.html#HEADING332-37">Sound Result Frame</A><DD><DT><A HREF="NPG2-332.html#HEADING332-42">User Configuration Variables</A><DD><DT><A HREF="NPG2-332.html#HEADING332-48">Synthesized Sound Data Format</A><DD><DT><A HREF="NPG2-332.html#HEADING332-68">soundRecorder Object</A><DD><DT><A HREF="NPG2-332.html#HEADING332-79">Protos</A><DD><DT><A HREF="NPG2-332.html#HEADING332-80">protoRecorderView</A><DD><DT><A HREF="NPG2-332.html#HEADING332-89">protoSoundChannel</A><DD><DT><A HREF="NPG2-332.html#HEADING332-113">protoSoundFrame</A><DD><DT><A HREF="NPG2-332.html#HEADING332-123">Functions</A><DD></DL></B></BLOCKQUOTE><HR><center><A HREF="NPG2-331.html"><IMG ALIGN = BOTTOM SRC = "graphics/prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="NPG2-2.html"><IMG ALIGN = BOTTOM SRC = "graphics/content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="NPG2-443.html"><IMG ALIGN = BOTTOM SRC = "graphics/index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="NPG2-333.html"><IMG ALIGN = BOTTOM SRC = "graphics/next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P><center><font size=-1><A HREF="NPG2-3.html">&copy; Apple Computer, Inc.</A><br>26 APR 1997<P><!--------------------------- Navigation Area ----------------------------------><BR><!-- Navigation Area --><BR><A HREF="reference to server cgi goes here"><IMG BORDER="0" SRC="../../../../images/nav.gif" WIDTH="500" HEIGHT="32" ALT="Navigation graphic, see text links" ISMAP USEMAP="#nav"></A><BR><P><A HREF="../../../../devworld.shtml">Main</A> | <A HREF="../../techinfo.html">Top of Section</A> | <A HREF="../../newtondev.shtml#WhatsNew">What's New</A> | <A HREF="http://www.apple.com/">Apple Computer, Inc.</A> |<A HREF="../../../../find.html">Find It</A> | <A HREF="../../feedback.html">Feedback</A> | <A HREF="../../../../help.html">Help</A></FONT><P></CENTER><!-- Don't forget to add the necessary links for each of these items. --><BR><MAP NAME="nav"><!-- client side map for www.apple.com nav.gif --><!-- Main --><AREA SHAPE="RECT" COORDS="9,6,70,25" HREF="../../../../devworld.shtml"><!-- Page One --><AREA SHAPE="RECT" COORDS="80,6,142,25" HREF="../../techinfo.html"><!-- What's New --><AREA SHAPE="RECT" COORDS="150,5,211,25" HREF="../../newtondev.shtml#WhatsNew"><!-- Apple Logo --><AREA SHAPE="RECT" COORDS="220,6,280,25" HREF="http://www.apple.com/"><!-- Find It --><AREA SHAPE="RECT" COORDS="290,5,350,26" HREF="../../../../find.html"><!-- Contact Us --><AREA SHAPE="RECT" COORDS="361,5,422,25" HREF="../../feedback.html"><!-- Help --><AREA SHAPE="RECT" COORDS="430,5,492,25" HREF="../../../../help.html"><!-- DEFAULT AREA NOT SUPPORTED BY CLIENT SIDE IMAGEMAPS! --></MAP><P></BODY></HTML> 