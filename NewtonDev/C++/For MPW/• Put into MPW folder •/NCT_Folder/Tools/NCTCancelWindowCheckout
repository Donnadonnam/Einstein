##	File:		CancelWindowCheckOut##	Contains:	script to revert to an old copy of a checked-out window##	Usage:		CancelWindowCheckOut window##	Status:		CancelWindowCheckOut may return the following status values:##					0		the window was reverted#					1		error#					2		the user canceled##				CancelWindowCheckOut cancels the changes that have been made#				to a file in a window.##	Written by:	Darin Adler and scott douglass##	Copyright:	© 1988, 1989, 1992-1995by Apple Computer, Inc., all rights reserved.##	Change History (most recent first):## NOTE:  This NCT build script was created from version <5> of the internal#        build scriptSet Exit 0Set NCTredirect "·"# the following helps to debug until MPW sends echos to Dev:Console instead of Dev:StdErrIf {Echo}	Set NCTsomewhere "{NCTredirect}{NCTredirect} '{{Worksheet}}'"Else	Set NCTsomewhere "{NCTredirect} Dev:Null"EndSet NCTAlertCmd AlertBegin	If "{{1}}" !~ /Å:Å/		Set NCTWindow ":{{1}}"	Else		Set NCTWindow "{{1}}"	End	# get short name of window	If "{NCTWindow}" !~ /:*([Â:]+:*)*([Â:]+)¨1/		{NCTAlertCmd} "CanÕt parse window parameter."		Exit 1	End	Set NCTShort "{¨1}"					# get short name for dialogs	Set NCTCant "Changes to Ò{NCTShort}Ó canÕt be discarded"		# check what project the window belongs to	Set NCTInfo "`ProjectInfo "{NCTWindow}"`"	If "{NCTInfo}" !~ /ÅProject: (Åº)¨1     Checked out: Å/		{NCTAlertCmd} "{NCTCant} because it doesnÕt belong to a project."		Exit 1	End	Set NCTProject "{¨1}"		If "{NCTInfo}" !~ /[Â,]+,[Â ¶t]+¶+Å/		{NCTAlertCmd} "{NCTCant} because it wasnÕt checked out."		Exit 1	End	# check if the project is mounted	Set NCTInfo "`ProjectInfo -only -project "{NCTProject}"; Set NCTInfoStatus {Status}`"	If {NCTInfoStatus}		{NCTAlertCmd} "{NCTCant} because the project Ò{NCTProject}Ó is not mounted."		Exit 1	End	# Now we can cancel the checkout (or try - it may have been cancelled by someone else!)	Set NCTTempFile "{{TempFolder}}"NCTCancelWindowCheckOut.temp	CheckOut -project "{NCTProject}" -cancel "{NCTWindow}" ³ "{{NCTTempFile}}"	If {Status}		# We couldn't cancel the checkout. This might be because someone else		# cancelled it already. If not, we die.		If "`Catenate "{NCTTempFile}"`" !~ /Åbecause it isn¶'t checked out.Å/			{NCTAlertCmd} "{NCTCant}; Checkout said Ò`Catenate "{NCTTempFile}"`Ó."			Delete -i "{{NCTTempFile}}"			Exit 1		End		# Someone cancelled it already. Tell the user, then try to get the "original"		# version back 		{NCTAlertCmd} "Apparently someone else cancelled your checkout already. IÕll continue, in spite of the hardship this causes me."		Set NCTInfo "`ProjectInfo -s -project "{NCTProject}" "{NCTWindow}"`"		Set NCTCommaVersion ""		If "{NCTInfo}" =~ /Å,([0-9.a-z]+)¨1Å/			Set NCTCommaVersion ",{¨1}"		End		Close -n "{NCTWindow}"		Delete -i "{NCTWindow}"		CheckOut -project "{NCTProject}" "{NCTShort}{NCTCommaVersion}" ³ "{{NCTTempFile}}"	End	Delete -i "{{NCTTempFile}}"End {NCTsomewhere}