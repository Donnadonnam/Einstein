<!-- Generated by Harlequin WebMaker 2.3.1 (16-Oct-1996)Macintosh Common Lisp Version 4.0 --><HTML> <HEAD><TITLE>The Caret Stack and Caret Activation</TITLE></HEAD><BODY><A NAME=HEADING171></A><CENTER>     <IMG BORDER="0" SRC="../../../../images/level3.gif" ALT="Title Banner"      ISMAP USEMAP="#level3">     <BR>     <MAP NAME="level3">     <!-- Find It -->     <AREA SHAPE="RECT" COORDS="7, 9, 69, 30" HREF="../../../../find.html">     <!-- Main -->     <AREA SHAPE="RECT" COORDS="432, 9, 492, 30" HREF="../../../../devworld.shtml">     </MAP><P><A HREF="NPG2-170.html"><IMG ALIGN = BOTTOM SRC = "graphics/prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="NPG2-2.html"><IMG ALIGN = BOTTOM SRC = "graphics/content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="NPG2-443.html"><IMG ALIGN = BOTTOM SRC = "graphics/index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="NPG2-172.html"><IMG ALIGN = BOTTOM SRC = "graphics/next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P><FONT SIZE=-1><DL><DT><A HREF="../../techinfo.html"><B>Newton Developer Technical Information:</B></A> <A HREF="NPG2-2.html"><B>Newton Programmer's Guide: 2.1 OS Addendum</B></A> / <BR><DD><A HREF="NPG2-159.html"><B>Chapter 4 - Keyboard Enhancements</B></A> / <A HREF="NPG2-167.html"><B>Using the Keyboard Enhancements</B></A></DL></FONT><P><HR><BLOCKQUOTE><A NAME=HEADING171-0></A><H2>The Caret Stack and Caret Activation</H2> The system maintains a stack of key-views, which allows the current key-view to be reset to the previous one when a key-view is closed. For example, when the user opens the Find slip while the caret is in the notepad, the caret is moved from the notepad to the input line in the Find slip. Then, when the user closes the find slip, the caret is returned to the notepad in its former location.<P> The system attempts to preserve selections in this process. If the user selects a word in the notepad, then opens the find slip and closes it, the word in the notepad will be re-selected.<P> The caret stack mechanism is largely invisible to applications. When a view becomes the key-view (either through a user action or through restoration from the caret stack) or when a view loses the key-view, the following message is sent to the view that is losing the caret:<P><PRE><P> oldkeyview:ViewCaretActivateScript(nil);<P></PRE> Immediately thereafter, the following message is sent to the view that is getting the caret:<P><PRE><P> newkeyview:ViewCaretActivateScript(true);<P></PRE> You can use the <CODE>ViewCaretActivateScript</CODE> method to trigger actions when your view becomes the key-view or is no longer the key-view. The return value is ignored.<P> <A HREF=#MARKER-9-35>Listing 4-5</A> shows an example of a <CODE>ViewCaretActivateScript</CODE> method. This implementation plays a sound at caret activation time: if a keyboard is connected, it beeps; if not, it clicks.<P><B>Listing 4-5  <A NAME=MARKER-9-35></A>An example of a ViewCaretActivateScript method</B><P><PRE><P> ViewCaretActivateScript: func( active )<P>   begin   if KeyboardConnected() then      :SysBeep();   else      PlaySound(ROM_Click);   nil;   end</PRE></BLOCKQUOTE><HR><center><A HREF="NPG2-170.html"><IMG ALIGN = BOTTOM SRC = "graphics/prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="NPG2-2.html"><IMG ALIGN = BOTTOM SRC = "graphics/content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="NPG2-443.html"><IMG ALIGN = BOTTOM SRC = "graphics/index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="NPG2-172.html"><IMG ALIGN = BOTTOM SRC = "graphics/next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P><center><font size=-1><A HREF="NPG2-3.html">&copy; Apple Computer, Inc.</A><br>26 APR 1997<P><!--------------------------- Navigation Area ----------------------------------><BR><!-- Navigation Area --><BR><A HREF="reference to server cgi goes here"><IMG BORDER="0" SRC="../../../../images/nav.gif" WIDTH="500" HEIGHT="32" ALT="Navigation graphic, see text links" ISMAP USEMAP="#nav"></A><BR><P><A HREF="../../../../devworld.shtml">Main</A> | <A HREF="../../techinfo.html">Top of Section</A> | <A HREF="../../newtondev.shtml#WhatsNew">What's New</A> | <A HREF="http://www.apple.com/">Apple Computer, Inc.</A> |<A HREF="../../../../find.html">Find It</A> | <A HREF="../../feedback.html">Feedback</A> | <A HREF="../../../../help.html">Help</A></FONT><P></CENTER><!-- Don't forget to add the necessary links for each of these items. --><BR><MAP NAME="nav"><!-- client side map for www.apple.com nav.gif --><!-- Main --><AREA SHAPE="RECT" COORDS="9,6,70,25" HREF="../../../../devworld.shtml"><!-- Page One --><AREA SHAPE="RECT" COORDS="80,6,142,25" HREF="../../techinfo.html"><!-- What's New --><AREA SHAPE="RECT" COORDS="150,5,211,25" HREF="../../newtondev.shtml#WhatsNew"><!-- Apple Logo --><AREA SHAPE="RECT" COORDS="220,6,280,25" HREF="http://www.apple.com/"><!-- Find It --><AREA SHAPE="RECT" COORDS="290,5,350,26" HREF="../../../../find.html"><!-- Contact Us --><AREA SHAPE="RECT" COORDS="361,5,422,25" HREF="../../feedback.html"><!-- Help --><AREA SHAPE="RECT" COORDS="430,5,492,25" HREF="../../../../help.html"><!-- DEFAULT AREA NOT SUPPORTED BY CLIENT SIDE IMAGEMAPS! --></MAP><P></BODY></HTML> 