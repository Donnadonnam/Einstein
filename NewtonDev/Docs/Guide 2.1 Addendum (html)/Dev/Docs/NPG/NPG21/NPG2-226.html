<!-- Generated by Harlequin WebMaker 2.3.1 (16-Oct-1996)Macintosh Common Lisp Version 4.0 --><HTML> <HEAD><TITLE>Specifying Shades of Gray</TITLE></HEAD><BODY><A NAME=HEADING226></A><CENTER>     <IMG BORDER="0" SRC="../../../../images/level3.gif" ALT="Title Banner"      ISMAP USEMAP="#level3">     <BR>     <MAP NAME="level3">     <!-- Find It -->     <AREA SHAPE="RECT" COORDS="7, 9, 69, 30" HREF="../../../../find.html">     <!-- Main -->     <AREA SHAPE="RECT" COORDS="432, 9, 492, 30" HREF="../../../../devworld.shtml">     </MAP><P><A HREF="NPG2-225.html"><IMG ALIGN = BOTTOM SRC = "graphics/prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="NPG2-2.html"><IMG ALIGN = BOTTOM SRC = "graphics/content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="NPG2-443.html"><IMG ALIGN = BOTTOM SRC = "graphics/index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="NPG2-227.html"><IMG ALIGN = BOTTOM SRC = "graphics/next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P><FONT SIZE=-1><DL><DT><A HREF="../../techinfo.html"><B>Newton Developer Technical Information:</B></A> <A HREF="NPG2-2.html"><B>Newton Programmer's Guide: 2.1 OS Addendum</B></A> / <BR><DD><A HREF="NPG2-213.html"><B>Chapter 6 - Drawing and Graphics 2.1</B></A> / <A HREF="NPG2-225.html"><B>Using Drawing and Graphics in the Newton 2.1 OS</B></A></DL></FONT><P><HR><BLOCKQUOTE><A NAME=HEADING226-0></A><H2><A NAME=MARKER-9-13></A>Specifying Shades of Gray</H2> The following constants are defined which specify 4-bit grayscale values:<P><PRE><P> kRGB_Gray0, kRGB_Gray1, kRGB_Gray2, ... , kRGB_Gray15<P></PRE> Black is <CODE>kRGB_Gray15</CODE>, and can also be referred to by the constant <CODE>kRGB_Black</CODE>. White is <CODE>kRGB_Gray0</CODE>, for which the constant <CODE>kRGB_White</CODE> is also defined. These values can be used anywhere a color needs specifying, in a graphic shape, in a font spec frame, and as a view's fill, frame, or line pattern. The sixteen gray tones are shown in <A HREF=#MARKER-9-14>Figure 6-5</A>.<P><B>Figure 6-5  <A NAME=MARKER-9-14></A>The 4-bit grayscale palette </B><P><IMG ALIGN = BOTTOM SRC = "graphics/G4BitPal.jpg"><BR><BR> The constant <CODE>kRGB_16GrayIncrement</CODE> is also quite useful. This constant equals the difference between two gray tones. For example, the following expression evaluates to <CODE>true</CODE>:<P><PRE><P> kRGB_Gray3 = (3 * <CODE>kRGB_16GrayIncrement)</CODE> + kRGB_Black;<P></PRE><A NAME=HEADING226-8></A><H3>Specifying RGB Triplets</H3> You can specify a gray tone as an RGB (red-green-blue) triplet. These are mapped to gray tones at run time. They can be used anywhere the <CODE>kRGB_GrayXX</CODE> values are used. RGB triplets are represented as packed integers.<P> There are a number of utility functions provided to deal with packed RGB integers:<P><UL><LI><CODE><A HREF=NPG2-259.html#MARKER-9-79><EM>*</A>PackRGB</EM></CODE> takes three 16-bit integers (that is, integers in the range [0,65535]) specifying the red, green, and blue components, and returns a packed RGB integer. The following example uses this function:</UL><PRE><P> myView.viewFillPattern := PackRGB (0x8888, 0xFFFF, 0x21AA); <P></PRE><UL><LI><CODE><A HREF=NPG2-251.html#MARKER-9-61><EM>*</A>GetTone</EM></CODE> takes a packed RGB integer and returns the tone of gray the RGB triplet maps to. It is this gray tone that is displayed on the screen. For example, the following two expressions evaluate to <CODE>true</CODE>:</UL><PRE><P> 0 = GetTone( PackRGB (0xFFFF, 0xFFFF, 0xFFFF) );//white<P> 1 = GetTone( PackRGB (0xFFFF, 0xCCCC, 0xFFFF) );//a very light gray<P><P></PRE><UL><LI><CODE><A HREF=NPG2-253.html#MARKER-9-65><EM>*</A>IsEqualTone</EM></CODE> takes two packed RGB integers and returns <CODE>true</CODE> if they map to the same gray tone. The following code illustrates the use of this function:</UL><PRE><P> IsEqualTone( PackRGB(0,0,0), PackRGB(2,7,88) ); // returns true<P> IsEqualTone( PackRGB(0,0,0), PackRGB(2000,7000,8800) );// returns nil<P><P></PRE><UL><LI><CODE><A HREF=NPG2-249.html#MARKER-9-57><EM>*</A>GetRed</EM></CODE>, <A HREF=NPG2-246.html#MARKER-9-51><EM>*</EM></A><CODE>GetGreen</CODE>, and <A HREF=NPG2-245.html#MARKER-9-49><EM>*</EM></A><CODE>GetBlue</CODE> take a packed RGB triplet and return the relevant color component as an integer in the range [0,65535]. The following example illustrates the use of one of these functions:</UL><PRE><P> local thePackedInt := PackRGB( 0, 0x1111, 0xFFFF);<P> GetBlue (thePackedInt); // this returns an integer close to 0xFFFF<P><P></PRE><DL><DT><B><A NAME=MARKER-9-15></A>Note</B><DD><CODE><A HREF=NPG2-249.html#MARKER-9-57><EM>*</A>GetRed(<A HREF=NPG2-259.html#MARKER-9-79>*</A>PackRGB(r,g,b))</EM></CODE> might not return <CODE>r</CODE>. All that is guaranteed is that the return value of this function call <BR>is an integer close to <CODE>r</CODE>.  <EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif"></DL><UL><LI><CODE><A HREF=NPG2-442.html#MARKER-9-21><EM>*</A>UnPackRGB</EM></CODE> takes a packed RGB triplet and returns a frame with <CODE>red</CODE>, <CODE>green</CODE>, and <CODE>blue</CODE> slots. This function is provided by the NTK environment, and is thus available at build time only. The following example illustrates the use of this function:</UL><PRE><P> UnPackRGB(PackRGB(r,g,b)); //returns integers close to r, g, and b<P></PRE><A NAME=HEADING226-26></A><H3><A NAME=MARKER-9-16></A>Using Patterns, Gray Patterns, and Dithered Patterns</H3> The following sections provide information about the three types of patterns that can be drawn. You should read <A HREF=#MARKER-9-17>"Black and White Patterns"</A> even if you want to create one of the other patterns.<P><A NAME=HEADING226-28></A><H3><A NAME=MARKER-9-17></A>Black and White Patterns </H3> A black and white pattern is specified as a 8-byte binary object of class <CODE>'pattern</CODE>, representing an 8x8 bitmap. The system has five built-in patterns, which you can reference through the constants <CODE>vfWhite</CODE>, <CODE>vfLtGray</CODE>, <CODE>vfGray</CODE>, <CODE>vfDarkGray</CODE>, and <CODE>vfBlack</CODE>. You may also define your own patterns.<P> To create a pattern, use the NTK function <A HREF=NPG2-438.html#MARKER-9-13><EM>*</EM></A><CODE>MakeBinaryFromHex</CODE>. It takes a class symbol and a sting with an even number of hex digits, each set of two digits defining a byte in the binary object. <P> The following example creates a simple striped pattern, and stores it in a constant, since <A HREF=NPG2-438.html#MARKER-9-13><EM>*</EM></A><CODE>MakeBinaryFromHex</CODE> is available at build-time, but not at run-time):<P><PRE><P> DefineGlobalConstant ( 'kMyBlackAndWhitePattern,<P>    MakeBinaryFromHex (&quot;AAAAAAAAAAAAAAAA&quot;, 'pattern) );<P><P></PRE> Each A has the binary representation 1010, making for the following 8x8 bitmap:<P><PRE><P> 10101010<P>101010101010101010101010101010101010101010101010 10101010<P><P></PRE><A NAME=HEADING226-43></A><H3><A NAME=MARKER-9-18></A>Gray Patterns</H3> Gray patterns are binary objects with the class <CODE>'grayPattern</CODE>. A gray pattern consists of an 8x8 pattern of pixels, each of which is specified as an RGB triplet. Each color component is specified with two bytes, making for 6 bytes per pixel. You do not, however, need to specify all 64 RGB triplets. The following rules are used when a gray pattern has less than 64 pixels:<P><UL><LI>If there are less than 8 pixels: the defined pixels are repeated until an 8 pixel line has been completed. This line is repeated 8 times.<LI>Otherwise, the pixels are divided into 8 pixel lines, discarding any left over pixels. These lines are repeated as needed to create an 8 line pattern.</UL> The following example creates a 1-pixel pattern in a dark tone of gray:<P><PRE><P> DefineGlobalConstant ( 'kMyOnePixelGrayPattern,<P>    MakeBinaryFromHex (&quot;AAAAFFFF6666&quot; , 'grayPattern) );<P><P></PRE> This next example creates a striped pattern as in <A HREF=#MARKER-9-17>&quot;Black and White Patterns&quot;</A>, using 2 pixels in different tones of gray:<P><PRE><P> DefineGlobalConstant ( 'kMyTwoPixelGrayPattern,<P>    MakeBinaryFromHex (&quot;999999999999555555555555&quot;, 'grayPattern) );<P><P></PRE><DL><DT><B><A NAME=MARKER-9-19></A>Note</B><DD>A gray pattern can be a very large object. Specify only as much of a pattern as you need, and try to keep your patterns simple. With a simple pattern you frequently can take advantage of the duplication done by the system when less than 64 pixels are defined. Also consider using a dithered pattern if you only need two tones of gray. A dithered pattern requires about as much memory as a gray pattern with five pixels defined. <EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif"></DL><A NAME=HEADING226-55></A><H3><A NAME=MARKER-9-20></A>Dithered Patterns </H3> If you need a two-toned pattern, you can use the <CODE>'ditherPattern</CODE> class to create a "black and white" pattern, and assign one tone of gray to the "black" pixels, and another tone to the "white" pixels. A dithered pattern is defined as a frame of the following format:<P><PRE><P> {<P><CODE>   class: 'ditherPattern</CODE>,  <I>   pattern: aBlackAndWhitePattern</I>, // a 'pattern (e.g. vfGray)   foreground: kRGB_Gray0, //  kRGB_Gray0 through kRGB_Gray15   background: kRGB_Gray15, //  kRGB_Gray0 through kRGB_Gray15  }<P><P></PRE> The <CODE>pattern</CODE> slot contains a black and white pattern object as described in <A HREF=#MARKER-9-17>&quot;Black and White Patterns&quot;</A>; this includes the built-in black and white patterns of the <CODE>vfGray</CODE> family. The <CODE>foreground</CODE> slot defines the tone of gray of the black pixels (the 1's), and the <CODE>background</CODE> slot defines the tone of the white pixels (the 0's).<P> The <A HREF=NPG2-439.html#MARKER-9-15><EM>*</EM></A><CODE>MakeDitheredPattern</CODE> function creates frames of this format. You should use this function instead of creating your own frame, as this ensures that the frame map is shared.<P> The following example creates the striped black and white pattern with two shades of gray, this pattern has fatter stripes than the one in <A HREF=#MARKER-9-17>&quot;Black and White Patterns&quot;</A>:<P><PRE><P> DefineGlobalConstant ( 'kMyStripedBWPattern,<P>   MakeBinaryFromHex (&quot;F0F0F0F0F0F0F0F0&quot;, 'pattern) );DefineGlobalConstant ( 'kMyDitheredPattern ,    MakeDitheredPattern(kMyStripedBWPattern, kRGB_Gray3, kRGB_Gray9) );<P><P></PRE></BLOCKQUOTE><HR><center><A HREF="NPG2-225.html"><IMG ALIGN = BOTTOM SRC = "graphics/prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="NPG2-2.html"><IMG ALIGN = BOTTOM SRC = "graphics/content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="NPG2-443.html"><IMG ALIGN = BOTTOM SRC = "graphics/index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="NPG2-227.html"><IMG ALIGN = BOTTOM SRC = "graphics/next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P><center><font size=-1><A HREF="NPG2-3.html">&copy; Apple Computer, Inc.</A><br>26 APR 1997<P><!--------------------------- Navigation Area ----------------------------------><BR><!-- Navigation Area --><BR><A HREF="reference to server cgi goes here"><IMG BORDER="0" SRC="../../../../images/nav.gif" WIDTH="500" HEIGHT="32" ALT="Navigation graphic, see text links" ISMAP USEMAP="#nav"></A><BR><P><A HREF="../../../../devworld.shtml">Main</A> | <A HREF="../../techinfo.html">Top of Section</A> | <A HREF="../../newtondev.shtml#WhatsNew">What's New</A> | <A HREF="http://www.apple.com/">Apple Computer, Inc.</A> |<A HREF="../../../../find.html">Find It</A> | <A HREF="../../feedback.html">Feedback</A> | <A HREF="../../../../help.html">Help</A></FONT><P></CENTER><!-- Don't forget to add the necessary links for each of these items. --><BR><MAP NAME="nav"><!-- client side map for www.apple.com nav.gif --><!-- Main --><AREA SHAPE="RECT" COORDS="9,6,70,25" HREF="../../../../devworld.shtml"><!-- Page One --><AREA SHAPE="RECT" COORDS="80,6,142,25" HREF="../../techinfo.html"><!-- What's New --><AREA SHAPE="RECT" COORDS="150,5,211,25" HREF="../../newtondev.shtml#WhatsNew"><!-- Apple Logo --><AREA SHAPE="RECT" COORDS="220,6,280,25" HREF="http://www.apple.com/"><!-- Find It --><AREA SHAPE="RECT" COORDS="290,5,350,26" HREF="../../../../find.html"><!-- Contact Us --><AREA SHAPE="RECT" COORDS="361,5,422,25" HREF="../../feedback.html"><!-- Help --><AREA SHAPE="RECT" COORDS="430,5,492,25" HREF="../../../../help.html"><!-- DEFAULT AREA NOT SUPPORTED BY CLIENT SIDE IMAGEMAPS! --></MAP><P></BODY></HTML> 