#	File:		RunNCTBuildCommands##	Contains:	Sets up to quickly execute the appropriate Makefiles##	Written by:	Newton Tools Group##	Copyright:	© 1995-1996 by Apple Computer, Inc., all rights reserved.#Set NCTsave-dir "`Directory -q`"### check to see if NCT_Makefile-dir defined If "{NCT_Makefile-dir}" == "" 	echo "#¶¥ === Error ===  Build System expected a project to be selected from the {NCTMenuName} menu"	failbeep	exit 1End	##   an NCT project  has been selectedIf `files "{NCT_Makefile-dir}" | count -l` == 0	echo "#¥ === Error ===  You indicated that you wanted to build the Ò{NCT_cur_project}Ó"	echo "##¥The Build System did not find any files in your Ò{NCT_projectname}Ó folder." 	echo "#¥Please provide the missing files and then try building them"	echo "#¥`Date -t` "	failbeep	exit 1End	# First is the Makefile up-to-date with the FilesInBuild file?Directory "{NCT_Makefile-dir}"If "`Exists FilesInBuild`" 		if "`Newer FilesInBuild Makefile`"			  NCTBuildMakeFile 		endElse	if "`Exists Makefile`" == ""		Echo "#¥ === Error ===  Unable to build because you have not created either a FilesInBuild file or your own Makefile"		failbeep		Exit 1	endEndSet save-BuildResultsFolder "{NCT_Makefile-dir}YourOldBuildResults"IF "`Exists -d "{save-BuildResultsFolder}"`" ­ ""###	Save the NCT-ObjectOut folder, the Makeout file, and  any relevant targets echo "¶¥ Saving existing build results to the folder YourOldBuildResults"	If  "`Exists -d "{NCT_Makefile-dir}{NCT-ObjectOut}:"`" ­ ""		if "`Exists -d "{save-BuildResultsFolder}:{NCT-ObjectOut}:"`" ­ ""			Delete -y "{save-BuildResultsFolder}:{NCT-ObjectOut}:"		end		if "`Files -f -s "{NCT_Makefile-dir}{NCT-ObjectOut}:"`" ­ ""			echo " .......Copying Ò{NCT-ObjectOut}Ó folder contents"			Duplicate -y "{NCT_Makefile-dir}{NCT-ObjectOut}:" "{save-BuildResultsFolder}"		end	End		If  "`Exists -f "{NCT_Makefile-dir}Makeout"`" ­ ""		echo " .......Copying the Makeout file"		Duplicate -y "{NCT_Makefile-dir}Makeout"  "{save-BuildResultsFolder}"	End		###	Move any .pkg files to the YourOldBuildResults Folder	Set _FileList "``Files -t 'pkg ' "{NCT_Makefile-dir}"``"	If "{{_FileList}}" 		echo " .......Copying any .pkg files"		for _aFile in {_FileList}			Duplicate -y  "{NCT_Makefile-dir}{_aFile}" "{save-BuildResultsFolder}" 		end # For	End		###	Move any .pkg files to the YourOldBuildResults Folder	Set _FileList "``Files -t 'ntkc' "{NCT_Makefile-dir}"``"	If "{{_FileList}}" 		echo " .......Copying any 'ntkc' files"		for _aFile in {_FileList}			Duplicate -y  "{NCT_Makefile-dir}{_aFile}" "{save-BuildResultsFolder}" 		end # For	End			### Move any image files to the YourOldbuildResults Folder	Set _FileList "``Files -c 'NwSB' "{NCT_Makefile-dir}"``"	If "{{_FileList}}" 		echo " .......Moving any Image files"		for _aFile in {_FileList}			Move -y  "{NCT_Makefile-dir}{_aFile}" "{save-BuildResultsFolder}" 		end # For	End	unset _aFile	unset _FileListENDIf  "`Exists -d "{NCT_Makefile-dir}{NCT-ObjectOut}:"`" == ""	NewFolder "{NCT_Makefile-dir}{NCT-ObjectOut}:"End### Build the NCT projectDirectory "{NCT_Makefile-dir}"save -aecho "¥ Building {NCT_Makefile-dir}...`Date -t`"Make > Makeout  || ( echo "#### Make failed in processing the Makefile" ; Exit 1) && Doit Makeoutecho "¥ Finished building {NCT_Makefile-dir} at `Date -t` "Directory "{NCTsave-dir}"beep 0g,4 1c,4 1e,7 1c,5,0 1c,5 1e,5 2c,10 1c,4,0 0c,5