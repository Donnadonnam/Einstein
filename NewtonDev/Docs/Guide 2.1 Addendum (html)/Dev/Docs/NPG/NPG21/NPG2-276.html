<!-- Generated by Harlequin WebMaker 2.3.1 (16-Oct-1996)Macintosh Common Lisp Version 4.0 --><HTML> <HEAD><TITLE>Using the Built-in Sound Recorder Slip</TITLE></HEAD><BODY><A NAME=HEADING276></A><CENTER>     <IMG BORDER="0" SRC="../../../../images/level3.gif" ALT="Title Banner"      ISMAP USEMAP="#level3">     <BR>     <MAP NAME="level3">     <!-- Find It -->     <AREA SHAPE="RECT" COORDS="7, 9, 69, 30" HREF="../../../../find.html">     <!-- Main -->     <AREA SHAPE="RECT" COORDS="432, 9, 492, 30" HREF="../../../../devworld.shtml">     </MAP><P><A HREF="NPG2-275.html"><IMG ALIGN = BOTTOM SRC = "graphics/prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="NPG2-2.html"><IMG ALIGN = BOTTOM SRC = "graphics/content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="NPG2-443.html"><IMG ALIGN = BOTTOM SRC = "graphics/index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="NPG2-277.html"><IMG ALIGN = BOTTOM SRC = "graphics/next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P><FONT SIZE=-1><DL><DT><A HREF="../../techinfo.html"><B>Newton Developer Technical Information:</B></A> <A HREF="NPG2-2.html"><B>Newton Programmer's Guide: 2.1 OS Addendum</B></A> / <BR><DD><A HREF="NPG2-262.html"><B>Chapter 7 - Sound</B></A> / <A HREF="NPG2-274.html"><B>Using Sound</B></A></DL></FONT><P><HR><BLOCKQUOTE><A NAME=HEADING276-0></A><H2><A NAME=MARKER-10-108></A><A NAME=MARKER-9-109></A>Using the Built-in Sound Recorder Slip</H2> The system includes a new built-in user interface object that lets the user control sound recording and playback. This floating slip (<A HREF=NPG2-267.html#MARKER-9-97>Figure 7-2</A> on <A HREF=NPG2-267.html#MARKER-9-97>page 7-3</A>) exists as a child of the root view, and is named <A HREF=NPG2-295.html#MARKER-9-148><EM>*</EM></A><CODE>soundRecorder</CODE>. This slip incorporates all the code necessary to record and play sounds. You can use this slip to add sound recording and playback capabilities to any application.<P> Note that because the <A HREF=NPG2-295.html#MARKER-9-148><EM>*</EM></A><CODE>soundRecorder</CODE> slip is an independent floating view, you don't embed it in your application's view hierarchy, you simply send it a message to open it.<P> <A NAME=MARKER-10-110></A>You can access the built-in sound recorder with code like this:<P><PRE><P> sr := GetRoot().soundRecorder;<P></PRE> To open this view to allow recording, use this call:<P><PRE><P> if sr then<P> <I>   sr:OpenRecord(callback</I>);<P><P></PRE> This sets up the recorder slip to do recording and opens it on the screen. The <I>callback</I> parameter is a function that you supply and is called when the user closes the slip. When the user taps the close box to close the recorder, the callback function is called with a single argument, the array of sound frames that were allocated as a result of recording. You can store them or do whatever processing is required.<P> To play a sound using the sound recorder slip, use this call:<P><PRE><P> sr:OpenPlay(<I>soundFrame</I>);<P></PRE> This sets up the recorder to play the sound frame passed in <I>soundFrame</I>, and opens it on the screen.<P> After opening the recorder slip with either <A HREF=NPG2-297.html#MARKER-9-152><EM>*</EM></A><CODE>OpenPlay</CODE> or <A HREF=NPG2-296.html#MARKER-9-150><EM>*</EM></A><CODE>OpenRecord</CODE>, you can set several slots in the sound recorder base view to override values in the associated sound channel and sound frames created by it. The slots you can set are shown in <A HREF=#MARKER-9-5>Table 7-1</A>.<p><B>Table 7-1  <A NAME=MARKER-9-5></A>Sound recorder slots you can set</B><TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>Slot<TH>Description<TR><TD><CODE>fSoundFrameSlots</CODE><TD>A frame that contains slots to be copied to the sound frames used for recording. This frame overrides the default values of the slots in any sound frames created by <A HREF=NPG2-295.html#MARKER-9-148><EM>*</EM></A><CODE>soundRecorder</CODE>. This frame can contain any slots that you want copied to the sound frames created by <A HREF=NPG2-295.html#MARKER-9-148><EM>*</EM></A><CODE>soundRecorder</CODE>.<TR><TD><CODE>fInputGain</CODE><TD>Sets the <CODE>inputGain</CODE> slot in the sound channel.<TR><TD><CODE>fInputDevice</CODE><TD>Sets the <CODE>inputDevice</CODE> slot in the sound channel.<TR><TD><CODE>fOutputDevice</CODE><TD>Sets the <CODE>outputDevice</CODE> slot in the sound channel.<TR><TD><CODE>fCallback</CODE><TD>A function that is called when the user taps the close box to close the recorder. It is passed a single argument, the array of sound frames that were allocated as a result of recording. Note that this slot is set by the <A HREF=NPG2-296.html#MARKER-9-150><EM>*</EM></A><CODE>OpenRecord</CODE> method (it's the argument you passed to <A HREF=NPG2-296.html#MARKER-9-150><EM>*</EM></A><CODE>OpenRecord</CODE>), so if you open the recorder by calling <A HREF=NPG2-296.html#MARKER-9-150><EM>*</EM></A><CODE>OpenRecord</CODE>, then you don't need to also set this slot.</TABLE><P> Here's an example of setting the <CODE>fSoundFrameSlots</CODE> slot in the sound recorder base view to specify that IMA compression be used for recording:<P><PRE><P> sr.fSoundFrameSlots := <P>{sndFrameType: 'codec, // use a codeccodecName: &quot;TIMACodec&quot;, // select IMA codecbufferSize: 12500, // size of codec buffersbufferCount: 4, // # of codec bufferscompressionType: kSampleLinear, // for playbackdataType: k16bit, // for playbacksamplingRate: 10000, // samples per secondcompressionRatio: 64/34, // for IMA }<P><P></PRE></BLOCKQUOTE><HR><center><A HREF="NPG2-275.html"><IMG ALIGN = BOTTOM SRC = "graphics/prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="NPG2-2.html"><IMG ALIGN = BOTTOM SRC = "graphics/content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="NPG2-443.html"><IMG ALIGN = BOTTOM SRC = "graphics/index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="NPG2-277.html"><IMG ALIGN = BOTTOM SRC = "graphics/next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P><center><font size=-1><A HREF="NPG2-3.html">&copy; Apple Computer, Inc.</A><br>26 APR 1997<P><!--------------------------- Navigation Area ----------------------------------><BR><!-- Navigation Area --><BR><A HREF="reference to server cgi goes here"><IMG BORDER="0" SRC="../../../../images/nav.gif" WIDTH="500" HEIGHT="32" ALT="Navigation graphic, see text links" ISMAP USEMAP="#nav"></A><BR><P><A HREF="../../../../devworld.shtml">Main</A> | <A HREF="../../techinfo.html">Top of Section</A> | <A HREF="../../newtondev.shtml#WhatsNew">What's New</A> | <A HREF="http://www.apple.com/">Apple Computer, Inc.</A> |<A HREF="../../../../find.html">Find It</A> | <A HREF="../../feedback.html">Feedback</A> | <A HREF="../../../../help.html">Help</A></FONT><P></CENTER><!-- Don't forget to add the necessary links for each of these items. --><BR><MAP NAME="nav"><!-- client side map for www.apple.com nav.gif --><!-- Main --><AREA SHAPE="RECT" COORDS="9,6,70,25" HREF="../../../../devworld.shtml"><!-- Page One --><AREA SHAPE="RECT" COORDS="80,6,142,25" HREF="../../techinfo.html"><!-- What's New --><AREA SHAPE="RECT" COORDS="150,5,211,25" HREF="../../newtondev.shtml#WhatsNew"><!-- Apple Logo --><AREA SHAPE="RECT" COORDS="220,6,280,25" HREF="http://www.apple.com/"><!-- Find It --><AREA SHAPE="RECT" COORDS="290,5,350,26" HREF="../../../../find.html"><!-- Contact Us --><AREA SHAPE="RECT" COORDS="361,5,422,25" HREF="../../feedback.html"><!-- Help --><AREA SHAPE="RECT" COORDS="430,5,492,25" HREF="../../../../help.html"><!-- DEFAULT AREA NOT SUPPORTED BY CLIENT SIDE IMAGEMAPS! --></MAP><P></BODY></HTML> 