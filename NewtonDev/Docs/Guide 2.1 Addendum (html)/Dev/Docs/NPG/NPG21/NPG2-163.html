<!-- Generated by Harlequin WebMaker 2.3.1 (16-Oct-1996)Macintosh Common Lisp Version 4.0 --><HTML> <HEAD><TITLE>About Command Key Handling</TITLE></HEAD><BODY><A NAME=HEADING163></A><CENTER>     <IMG BORDER="0" SRC="../../../../images/level3.gif" ALT="Title Banner"      ISMAP USEMAP="#level3">     <BR>     <MAP NAME="level3">     <!-- Find It -->     <AREA SHAPE="RECT" COORDS="7, 9, 69, 30" HREF="../../../../find.html">     <!-- Main -->     <AREA SHAPE="RECT" COORDS="432, 9, 492, 30" HREF="../../../../devworld.shtml">     </MAP><P><A HREF="NPG2-162.html"><IMG ALIGN = BOTTOM SRC = "graphics/prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="NPG2-2.html"><IMG ALIGN = BOTTOM SRC = "graphics/content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="NPG2-443.html"><IMG ALIGN = BOTTOM SRC = "graphics/index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="NPG2-164.html"><IMG ALIGN = BOTTOM SRC = "graphics/next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P><FONT SIZE=-1><DL><DT><A HREF="../../techinfo.html"><B>Newton Developer Technical Information:</B></A> <A HREF="NPG2-2.html"><B>Newton Programmer's Guide: 2.1 OS Addendum</B></A> / <BR><DD><A HREF="NPG2-159.html"><B>Chapter 4 - Keyboard Enhancements</B></A> / <A HREF="NPG2-160.html"><B>About Keyboard Enhancements</B></A></DL></FONT><P><HR><BLOCKQUOTE><A NAME=HEADING163-0></A><H2>About Command Key Handling</H2> Each view in your application has a set of key commands associated with it. This section describes how key commands are defined and associated with each view.<P> To define a key command for one of your views, you need to define a <CODE>keyCommand</CODE> frame, as described in <A HREF=NPG2-175.html#MARKER-9-38>&quot;The Command-Key Mapping Frame&quot;</A>.<P> You specify the method associated with a command key in the <CODE>keyMessage</CODE> slot of the <CODE>keyCommand</CODE> frame. The method need not be implemented in the same view as the command key. <P><A NAME=HEADING163-4></A><H3>How Command Keys Are Found</H3> The system software searches for command keys when the user presses one of the following keys:<P><UL><LI>a function key<LI>the escape key<LI>any key pressed while the command key is held down</UL> However, it is also possible to force the system to search for key commands with every keystroke, regardless of whether the command key is down. To do this, set the text flag <CODE>vAlwaysTryKeyCommands</CODE> in the key-view.<P> The following list describes how the system searches for a <CODE>keyCommand</CODE> frame when the user enters a potential command key:<P><OL><LI>The command search starts at the view that owns the caret. <LI>The system looks through the key commands registered in the current view for a <CODE>keyCommand</CODE> that matches the pressed key.<LI>If the system finds a match, the search is complete.<LI>Otherwise, the system looks for a slot named <CODE>_nextKeyView</CODE> in the current view. This slot contains a reference to another view. If the <CODE>_nextKeyView</CODE> slot is present, its contents are used as the next view in which to search.<LI>If the <CODE>_nextKeyView</CODE> slot is not found, the system moves up to the current view's parent and uses that as the next view to search. This continues until the command is found or the root view has been searched.</OL> The search for a command key is analagous to the parent inheritance chain. You can link a slip to your base view, rather than its parent, which is normally the root view. This allows a key command defined in your base view to be available in the slip. <P> Key commands can be global (available regardless of the context), specific to a certain application, or specific to a slip within an application. Some commands may even be specific to a certain input field of a certain slip. In any case, each key command is associated with a certain view. <A HREF=#MARKER-9-8>Table 4-1</A> shows how commands are associated with views.<p><B>Table 4-1  <A NAME=MARKER-9-8></A>Command definition views</B><TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>Command Type<TH>Associated view<TR><TD>Global commands<TD>Root view<TR><TD>Application commands<TD>Application's base view<TR><TD>Slip commands<TD>Slip's base view<TR><TD>Field commands<TD>Field's view</TABLE><P><A NAME=HEADING163-18></A><H3><A NAME=MARKER-9-20></A>About Displaying Command-Key Combinations in Menus</H3> To display a command-key combination for an item in a popup menu, you must define a <CODE>keyMessage</CODE> frame for the item. <P> For example, you can define a popup menu without command-key equivalents by passing an array to the <CODE>PopupMenu</CODE> view method. The following array creates a menu with three items:<P><PRE><P> [<P><P>    &quot;one&quot;,<P>   {icon: i, item: &quot;two&quot;},   {icon: ii, mark: $-, item: &quot;three&quot;}]</PRE> The second item in the above menu contains an icon and the third item contains an icon and a mark. <P> To create the above menu with command-key combinations, you specify <CODE>keyMessage</CODE> slots in the item frames. When the menu is displayed, the system software searches for a matching command key and then uses the name, character, and modifiers defined in the found <CODE>keyCommand</CODE> frame. For example, the menu could be defined with the following array:<P><PRE><P> [  &quot;one&quot;,<P>   {keyMessage: _DoSomething},   {keyMessage: _AnotherThing} ]</PRE> The names for the second and third items in the menu array above are found in the corresponding <CODE>keyCommand</CODE> frames. <P><DL><DT><B>Note</B><DD>To find a <CODE>keyCommand</CODE> frame that matches a menu item, the system looks for a <CODE>keyCommand</CODE> frame whose <CODE>keyMessage</CODE> slot has the same value as the <CODE>keyMessage</CODE> slot in the menu item frame. <EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif"></DL> If you want to display a name in the menu that is not the same as the name specified in the <CODE>keyCommand</CODE> frame, you can use a <CODE>keyMessage</CODE> slot and an item slot in the item frame. In this case, the item name is used instead of the name in the matching <CODE>keyCommand</CODE> frame. For example:<P><PRE><P>    {keyMessage: _DoSomething, item: "Something"},<P></PRE> In the above example, the name "Something" is displayed in the menu. <P><DL><DT><B>Note</B><DD>An item defined with a <CODE>keyMessage</CODE> slot can also have <CODE>icon</CODE> and <CODE>mark</CODE> slots.  <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif"></DL></BLOCKQUOTE><HR><center><A HREF="NPG2-162.html"><IMG ALIGN = BOTTOM SRC = "graphics/prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="NPG2-2.html"><IMG ALIGN = BOTTOM SRC = "graphics/content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="NPG2-443.html"><IMG ALIGN = BOTTOM SRC = "graphics/index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="NPG2-164.html"><IMG ALIGN = BOTTOM SRC = "graphics/next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P><center><font size=-1><A HREF="NPG2-3.html">&copy; Apple Computer, Inc.</A><br>26 APR 1997<P><!--------------------------- Navigation Area ----------------------------------><BR><!-- Navigation Area --><BR><A HREF="reference to server cgi goes here"><IMG BORDER="0" SRC="../../../../images/nav.gif" WIDTH="500" HEIGHT="32" ALT="Navigation graphic, see text links" ISMAP USEMAP="#nav"></A><BR><P><A HREF="../../../../devworld.shtml">Main</A> | <A HREF="../../techinfo.html">Top of Section</A> | <A HREF="../../newtondev.shtml#WhatsNew">What's New</A> | <A HREF="http://www.apple.com/">Apple Computer, Inc.</A> |<A HREF="../../../../find.html">Find It</A> | <A HREF="../../feedback.html">Feedback</A> | <A HREF="../../../../help.html">Help</A></FONT><P></CENTER><!-- Don't forget to add the necessary links for each of these items. --><BR><MAP NAME="nav"><!-- client side map for www.apple.com nav.gif --><!-- Main --><AREA SHAPE="RECT" COORDS="9,6,70,25" HREF="../../../../devworld.shtml"><!-- Page One --><AREA SHAPE="RECT" COORDS="80,6,142,25" HREF="../../techinfo.html"><!-- What's New --><AREA SHAPE="RECT" COORDS="150,5,211,25" HREF="../../newtondev.shtml#WhatsNew"><!-- Apple Logo --><AREA SHAPE="RECT" COORDS="220,6,280,25" HREF="http://www.apple.com/"><!-- Find It --><AREA SHAPE="RECT" COORDS="290,5,350,26" HREF="../../../../find.html"><!-- Contact Us --><AREA SHAPE="RECT" COORDS="361,5,422,25" HREF="../../feedback.html"><!-- Help --><AREA SHAPE="RECT" COORDS="430,5,492,25" HREF="../../../../help.html"><!-- DEFAULT AREA NOT SUPPORTED BY CLIENT SIDE IMAGEMAPS! --></MAP><P></BODY></HTML> 