<!-- Generated by Harlequin WebMaker 2.3.1 (16-Oct-1996)Macintosh Common Lisp Version 4.0 --><HTML> <HEAD><TITLE>Discovery Option</TITLE></HEAD><BODY><A NAME=HEADING355></A><CENTER>     <IMG BORDER="0" SRC="../../../../images/level3.gif" ALT="Title Banner"      ISMAP USEMAP="#level3">     <BR>     <MAP NAME="level3">     <!-- Find It -->     <AREA SHAPE="RECT" COORDS="7, 9, 69, 30" HREF="../../../../find.html">     <!-- Main -->     <AREA SHAPE="RECT" COORDS="432, 9, 492, 30" HREF="../../../../devworld.shtml">     </MAP><P><A HREF="NPG2-354.html"><IMG ALIGN = BOTTOM SRC = "graphics/prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="NPG2-2.html"><IMG ALIGN = BOTTOM SRC = "graphics/content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="NPG2-443.html"><IMG ALIGN = BOTTOM SRC = "graphics/index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="NPG2-356.html"><IMG ALIGN = BOTTOM SRC = "graphics/next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P><FONT SIZE=-1><DL><DT><A HREF="../../techinfo.html"><B>Newton Developer Technical Information:</B></A> <A HREF="NPG2-2.html"><B>Newton Programmer's Guide: 2.1 OS Addendum</B></A> / <BR><DD><A HREF="NPG2-346.html"><B>Chapter 9 - IrDA Communication Tool</B></A> / <A HREF="NPG2-354.html"><B>IrDA Tool Option Reference</B></A></DL></FONT><P><HR><BLOCKQUOTE><A NAME=HEADING355-0></A><H2><A NAME=MARKER-9-26></A><A NAME=MARKER-24-27></A>Discovery Option</H2> In the discovery phase of a connection, the Newton unit probes and accumulates a list of other IrDA devices within beaming range. Each device is loosely identified by a service hints field (PDA/Computer/Printer/etc.) and a device nickname. The <A HREF=#MARKER-9-26><EM>*</EM></A>kCMOIrDADiscoveryInformation option is used to specify which device to use and also how the Newton unit should appear to other devices that probe it.<P> You can also use this option after a connection has been made, to return information about the connection (the service hints of the discovered device, and its device address).<P> The following example shows the use of this option:<P><PRE><P> local option := {<P>   label:  kCMOIrDADiscoveryInformation, // &quot;irdi&quot;   type:   'option,   opCode: opSetRequired,   data: {      arglist: [         8,                // 8 probe slots         kIrDASvcHintPDAPalmtop,// service hint         kIrDASvcHintPrinter,// service hint mask         0,                // devAddr of peer device         1,                // use standard media busy check      ],      typelist: [         'struct,         'uLong, // fProbeSlots         'uLong, // fMyServiceHints         'uLong, // fPeerServiceHints         'uLong, // fPeerDevAddr         'uLong, // fMediaBusyCheck      ],    },};</PRE> The fields in the IrDA discovery option frame are described in <A HREF=#MARKER-9-1>Table 9-2</A>.<p><B>Table 9-2  IrDA discovery option fields<A NAME=MARKER-9-1></A></B><TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>Option field<TH>Description<TR><TD>fProbeSlots<TD>The number of "slots" used during probing. The valid choices are listed in <A HREF=#MARKER-9-5>Table 9-3</A>. The default is <CODE>kIrDA8ProbeSlot</CODE>. This value relates to an IrDA collision-avoidance mechanism. It is recommended that you use the default setting unless you have a specific reason for changing it.<TR><TD>fMyServiceHints<TD>The category of device that you wish to identify yourself as. The service hints are listed in <A HREF=#MARKER-9-2>Table 9-4</A>. The default value is <CODE>kIrDASvcHintPDAPalmtop</CODE>.<TR><TD>fPeerServiceHints<TD>A mask used to identify the categories of devices that you wish to connect to. You can OR together any combination of the values in <A HREF=#MARKER-9-2>Table 9-4</A> to construct this value. The default value is <CODE>0xFFFFFFFF</CODE> (accept any device during discovery phase). <TR><TD>fPeerDevAddr<TD>Read-only. Returns the address of the discovered device. <TR><TD>fMediaBusyCheck<TD>To enable a 600ms. delay before discovery begins, specify <CODE>true</CODE> (default). To disable the delay, specify <CODE>nil</CODE>. It is highly recommended that you use the default setting. If you are using a sender/receiver model (like Newton beaming) then you may want to set this field to <CODE>nil</CODE>. But beware, for this invalidates IrDA compliancy with other IrDA devices.</TABLE><P> Note that the service hints can be bit-OR'd together.<P> You can specify whatever you wish for the <CODE>fMyServiceHints</CODE> field, but the value <CODE>kIrDASvcHintPDAPalmtop</CODE> is always OR'd in by the IrDA tool.<p><B>Table 9-3  <A NAME=MARKER-9-5></A>IrDA discovery option probe slots constants</B><TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>Constant<TH>Value<TR><TD>kIrDA1ProbeSlot<TD>1<TR><TD>kIrDA6ProbeSlot<TD>6<TR><TD>kIrDA8ProbeSlot<TD>8<TR><TD>kIrDA12ProbeSlot<TD>12</TABLE><P> <p><B>Table 9-4  <A NAME=MARKER-9-2></A>IrDA discovery option service hint constants </B><TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>Constant<TH>Value<TR><TD>kIrDASvcHintPnPCompatible<TD>0x00000001<TR><TD>kIrDASvcHintPDAPalmtop<TD>0x00000002<TR><TD>kIrDASvcHintComputer<TD>0x00000004<TR><TD>kIrDASvcHintPrinter<TD>0x00000008<TR><TD>kIrDASvcHintModem<TD>0x00000010<TR><TD>kIrDASvcHintFAX<TD>0x00000020<TR><TD>kIrDASvcHintLanAccess<TD>0x00000040<TR><TD>kIrDASvcHintTelephony<TD>0x00000100<TR><TD>kIrDASvcHintFileServer<TD>0x00000200</TABLE><P> When used with the opcode <CODE>opGetCurrent,</CODE> the field <CODE>fPeerServiceHints</CODE> returns the service hints reported by the discovered device.<P><DL><DT><B><A NAME=MARKER-10-28></A>Note</B><DD>Fields used during an endpoint <CODE>Connect</CODE> operation include <CODE>fProbeSlots</CODE>, <CODE>fPeerServiceHints</CODE> and <CODE>fMediaBusyCheck</CODE>. Fields used during an endpoint <CODE>Listen</CODE> operation include <CODE>fMyServiceHints</CODE>. <EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif"></DL> <center><A HREF="NPG2-354.html"><IMG ALIGN = BOTTOM SRC = "graphics/prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="NPG2-2.html"><IMG ALIGN = BOTTOM SRC = "graphics/content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="NPG2-443.html"><IMG ALIGN = BOTTOM SRC = "graphics/index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="NPG2-356.html"><IMG ALIGN = BOTTOM SRC = "graphics/next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P><center><font size=-1><A HREF="NPG2-3.html">&copy; Apple Computer, Inc.</A><br>26 APR 1997<P><!--------------------------- Navigation Area ----------------------------------><BR><!-- Navigation Area --><BR><A HREF="reference to server cgi goes here"><IMG BORDER="0" SRC="../../../../images/nav.gif" WIDTH="500" HEIGHT="32" ALT="Navigation graphic, see text links" ISMAP USEMAP="#nav"></A><BR><P><A HREF="../../../../devworld.shtml">Main</A> | <A HREF="../../techinfo.html">Top of Section</A> | <A HREF="../../newtondev.shtml#WhatsNew">What's New</A> | <A HREF="http://www.apple.com/">Apple Computer, Inc.</A> |<A HREF="../../../../find.html">Find It</A> | <A HREF="../../feedback.html">Feedback</A> | <A HREF="../../../../help.html">Help</A></FONT><P></CENTER><!-- Don't forget to add the necessary links for each of these items. --><BR><MAP NAME="nav"><!-- client side map for www.apple.com nav.gif --><!-- Main --><AREA SHAPE="RECT" COORDS="9,6,70,25" HREF="../../../../devworld.shtml"><!-- Page One --><AREA SHAPE="RECT" COORDS="80,6,142,25" HREF="../../techinfo.html"><!-- What's New --><AREA SHAPE="RECT" COORDS="150,5,211,25" HREF="../../newtondev.shtml#WhatsNew"><!-- Apple Logo --><AREA SHAPE="RECT" COORDS="220,6,280,25" HREF="http://www.apple.com/"><!-- Find It --><AREA SHAPE="RECT" COORDS="290,5,350,26" HREF="../../../../find.html"><!-- Contact Us --><AREA SHAPE="RECT" COORDS="361,5,422,25" HREF="../../feedback.html"><!-- Help --><AREA SHAPE="RECT" COORDS="430,5,492,25" HREF="../../../../help.html"><!-- DEFAULT AREA NOT SUPPORTED BY CLIENT SIDE IMAGEMAPS! --></MAP><P></BODY></HTML> 