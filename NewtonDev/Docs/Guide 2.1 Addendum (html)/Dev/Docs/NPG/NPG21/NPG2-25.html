<!-- Generated by Harlequin WebMaker 2.3.1 (16-Oct-1996)Macintosh Common Lisp Version 4.0 --><HTML> <HEAD><TITLE>RegNewtWorksTool</TITLE></HEAD><BODY><A NAME=HEADING25></A><CENTER>     <IMG BORDER="0" SRC="../../../../images/level3.gif" ALT="Title Banner"      ISMAP USEMAP="#level3">     <BR>     <MAP NAME="level3">     <!-- Find It -->     <AREA SHAPE="RECT" COORDS="7, 9, 69, 30" HREF="../../../../find.html">     <!-- Main -->     <AREA SHAPE="RECT" COORDS="432, 9, 492, 30" HREF="../../../../devworld.shtml">     </MAP><P><A HREF="NPG2-24.html"><IMG ALIGN = BOTTOM SRC = "graphics/prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="NPG2-2.html"><IMG ALIGN = BOTTOM SRC = "graphics/content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="NPG2-443.html"><IMG ALIGN = BOTTOM SRC = "graphics/index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="NPG2-26.html"><IMG ALIGN = BOTTOM SRC = "graphics/next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P><FONT SIZE=-1><DL><DT><A HREF="../../techinfo.html"><B>Newton Developer Technical Information:</B></A> <A HREF="NPG2-2.html"><B>Newton Programmer's Guide: 2.1 OS Addendum</B></A> / <BR><DD><A HREF="NPG2-12.html"><B>Chapter 1 - Newton Works</B></A> / <A HREF="NPG2-21.html"><B>Newton Works Interface Reference</B></A><BR><DL><DD><A HREF="NPG2-22.html"><B>Newton Works Base Application Slots and Methods</B></A> / </DL></DL></FONT><P><HR><BLOCKQUOTE><A NAME=HEADING25-0></A><H3><A NAME=MARKER-9-38></A><A NAME=MARKER-24-39></A>RegNewtWorksTool</H3><CODE><I>newtAppBase</I>:RegNewtWorksTool(<I>toolSym</I>, <I>toolFrame</I>)</CODE><P> Registers a tool for the viewDef identified by the <CODE>dataTypeSymbol</CODE> slot in the <I>toolFrame</I> frame.<P><DL><DT><I><I>toolSym</I></I><DD> A unique symbol under which to register the tool.<P><DT><I><I>toolFrame</I></I><DD> A frame describing the command to appear in the Tools picker. Each command is a frame similar to the frames passed to <CODE>PopupMenu</CODE>, as documented in the section "Specifying the List of Items for a Popup" (page 6-37) in <I>Newton Programmer's Guide</I>. The standard slots (such as <CODE>item</CODE>, <CODE>icon</CODE>, and all other slots supported by <CODE>PopupMenu</CODE>) define the appearance of the command in the viewDef's Tools button, but each viewDef defines the additional slots it expects to see in this frame.<P><DT><I></I><DD> Every <I>toolFrame</I> must also contain the slot <CODE>dataTypeSymbol</CODE> that contains a symbol identifying the dataDef for which it's registered. For example, tools for the word processor have the symbol <CODE>'paper</CODE>.<P><DT><I>return value</I><DD> Returns non-<CODE>nil</CODE> if the tool was successfully registered, or <CODE>nil</CODE> if it was not.<P></DL><B>DISCUSSION</B><P> For <CODE>'drawPaper</CODE> (Draw) or <CODE>'paper</CODE> (Word Processor) stationery, provide the following additional slots and methods in <I>toolFrame</I>:<P><DL><DT><CODE>CmdFunc(<I>viewDefView, newtAppBase)</I></CODE><DD> A method called when the command is chosen from the Tools button. <I>viewDefView</I> is the main viewDef. <I>newtAppBase</I> is the Newton Works application. The return value of this method is not used.<DT><CODE>keyCommand</CODE> <DD> Optional, used by Word Processor stationery only. A frame with command key information, containing the same slots as the frames used to register command keys, as described in <A HREF=NPG2-175.html#MARKER-9-38>&quot;The Command-Key Mapping Frame&quot;</A>. To register a command key that activates an item on the Tools picker, the <CODE>keyCommand</CODE> frame must contain the method <CODE>KeyFn(<I>keyView)</I></CODE>. This method is called when the command key for this item is pressed. It is passed the key view, which will be the <CODE>viewDefView</CODE> or a child of it. This function should perform the action as if the command were chosen from the Tools picker. The return value of this function is not used.<DT><B>Note</B><DD>The <CODE>keyCommand</CODE> frame has a <CODE>keyMessage</CODE> slot that contains a symbol identifying a function. You should specify a symbol that contains your developer signature appended to it in order to uniquely identify it. This is because the Word Processor creates a slot of this name in its base view, and you don't want to conflict with any other tools that might specify a function with the same name. <EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif"></DL> If you are registering a tool for the Word Processor and including the <CODE>keyCommand</CODE> frame in the <I>toolFrame</I>, and thus are specifying a <CODE>KeyFn</CODE> method, you don't need to supply a <CODE>CmdFunc</CODE> method. This is because if a <CODE>CmdFunc</CODE> method does not exist, then Newton Works calls the <CODE>KeyFn</CODE> method in the <CODE>keyCommand</CODE> frame when a tool is chosen.<P> Normally you would want the <CODE>KeyFn</CODE> method in the <CODE>keyCommand</CODE> frame to do the same thing as the <CODE>CmdFunc</CODE> method in <I>toolFrame</I> anyway. The <CODE>KeyFn</CODE> method is called if the user presses the command-key combination for the tool and the <CODE>CmdFunc</CODE> method is ordinarily called if the tool is chosen from the Tools picker directly. <P> A tool can be registered for only one dataDef with each call to <CODE><A HREF=#MARKER-9-38><EM>*</A>RegNewtWorksTool</EM></CODE>; to register a tool for more than one datadef, call <CODE><A HREF=#MARKER-9-38><EM>*</A>RegNewtWorksTool</EM></CODE> again with the new <CODE>dataTypeSymbol</CODE> and a different <I>toolSym</I>.<P></BLOCKQUOTE><HR><center><A HREF="NPG2-24.html"><IMG ALIGN = BOTTOM SRC = "graphics/prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="NPG2-2.html"><IMG ALIGN = BOTTOM SRC = "graphics/content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="NPG2-443.html"><IMG ALIGN = BOTTOM SRC = "graphics/index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="NPG2-26.html"><IMG ALIGN = BOTTOM SRC = "graphics/next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P><center><font size=-1><A HREF="NPG2-3.html">&copy; Apple Computer, Inc.</A><br>26 APR 1997<P><!--------------------------- Navigation Area ----------------------------------><BR><!-- Navigation Area --><BR><A HREF="reference to server cgi goes here"><IMG BORDER="0" SRC="../../../../images/nav.gif" WIDTH="500" HEIGHT="32" ALT="Navigation graphic, see text links" ISMAP USEMAP="#nav"></A><BR><P><A HREF="../../../../devworld.shtml">Main</A> | <A HREF="../../techinfo.html">Top of Section</A> | <A HREF="../../newtondev.shtml#WhatsNew">What's New</A> | <A HREF="http://www.apple.com/">Apple Computer, Inc.</A> |<A HREF="../../../../find.html">Find It</A> | <A HREF="../../feedback.html">Feedback</A> | <A HREF="../../../../help.html">Help</A></FONT><P></CENTER><!-- Don't forget to add the necessary links for each of these items. --><BR><MAP NAME="nav"><!-- client side map for www.apple.com nav.gif --><!-- Main --><AREA SHAPE="RECT" COORDS="9,6,70,25" HREF="../../../../devworld.shtml"><!-- Page One --><AREA SHAPE="RECT" COORDS="80,6,142,25" HREF="../../techinfo.html"><!-- What's New --><AREA SHAPE="RECT" COORDS="150,5,211,25" HREF="../../newtondev.shtml#WhatsNew"><!-- Apple Logo --><AREA SHAPE="RECT" COORDS="220,6,280,25" HREF="http://www.apple.com/"><!-- Find It --><AREA SHAPE="RECT" COORDS="290,5,350,26" HREF="../../../../find.html"><!-- Contact Us --><AREA SHAPE="RECT" COORDS="361,5,422,25" HREF="../../feedback.html"><!-- Help --><AREA SHAPE="RECT" COORDS="430,5,492,25" HREF="../../../../help.html"><!-- DEFAULT AREA NOT SUPPORTED BY CLIENT SIDE IMAGEMAPS! --></MAP><P></BODY></HTML> 