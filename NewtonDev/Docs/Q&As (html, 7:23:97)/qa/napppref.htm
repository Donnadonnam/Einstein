<HTML><HEAD><TITLE>Newton 2.x Q&amp;A: Creating Preferences in a NewtApp-based Application</TITLE></HEAD><BODY BGCOLOR="#FFFFFF"><CENTER><H2>Creating Preferences in a NewtApp-based Application</H2><H4> One of the Newton 2.x OS Q&amp;As<BR>Copyright © 1997 Newton, Inc.  All Rights Reserved. Newton, Newton Technology, Newton Works, the Newton, Inc. logo, the Newton Technology logo, the Light Bulb logo and MessagePad are trademarks of Newton, Inc. and may be registered in the U.S.A. and other countries. Windows is a registered trademark of Microsoft Corp. All other trademarks and company names are the intellectual property of their respective owners.</H4><BR>For the most recent version of the Q&amp;As on the World Wide Web, check the URL: <CODE><A HREF="http://www.newton-inc.com/dev/techinfo/qa/qa.htm">http://www.newton-inc.com/dev/techinfo/qa/qa.htm</A></CODE><BR>If you've copied this file locally,<A HREF="qa.htm">click here to go to the main Newton Q&amp;A page.</A><BR>This document was exported on 7/23/97.</CENTER><H3><HR><B> </B>Creating Preferences in a NewtApp-based Application  (1/31/96)</H3><DL><DD>Q:    How do I create and use my own preferences slip in a NewtApp-based application?<BR><BR>A:    In your application's base view create a slot called <CODE>prefsView</CODE> and place a reference to the template for your preferences slip there (probably using the NTK <CODE>GetLayout</CODE> function.)  When the user selects "Prefs" from the Info button in your application, the NewtApp framework will create and open a view based on the template in the <CODE>prefsView</CODE> slot.<BR><BR>    When your preferences view opens, a reference to your application's base view is stored in a slot called <CODE>theApp </CODE>in the preferences view.  Use this reference to call the application's <CODE>GetAppPreferences</CODE> method.  This method will return a frame containing your application's preferences.  <CODE>GetAppPreferences</CODE> is a method provided by NewtApp and should not be overidden.<BR><BR>    When adding slots to the preferences frame, you must either append your developer signature to the name of the preference (for example, <CODE>'|Pref1:SIG|</CODE>) or create a slot in the preferences frame using your developer signature and save all preferences in that frame.  This will guarantee that you don't overwrite slots used by the NewtApp framework.<BR><BR>    Here is an example of how to get the preferences frame and add your data:<BR>        <CODE><PRE>        preferencesSlip.viewSetupFormScript := func()     begin        prefs := theApp:GetAppPreferences();        if NOT HasSlot(prefs, kAppSymbol) then            prefs.(kAppSymbol) := {myPref1: nil, myPref2: nil};    end;</PRE><BR>    </CODE>    <BR>    <BR>    To save the preferences, call the application's <CODE>SaveAppState</CODE> method:<BR><CODE><PRE>    preferencesSlip.viewQuitScript := func()        theApp:SaveAppState(); // save prefs</PRE><BR></CODE><BR>    NewtApp currently provides one built-in preference for where to save new items.  In the preferences frame there will be a slot called <CODE>internalStore</CODE>.  Setting this slot to <CODE>true </CODE>will force the NewtApp framework to save all new items on the internal store. </DL>