<!-- Generated by Harlequin WebMaker 2.3.1 (16-Oct-1996)Macintosh Common Lisp Version 4.0 --><HTML> <HEAD><TITLE>Using the protoRecorderView</TITLE></HEAD><BODY><A NAME=HEADING275></A><CENTER>     <IMG BORDER="0" SRC="../../../../images/level3.gif" ALT="Title Banner"      ISMAP USEMAP="#level3">     <BR>     <MAP NAME="level3">     <!-- Find It -->     <AREA SHAPE="RECT" COORDS="7, 9, 69, 30" HREF="../../../../find.html">     <!-- Main -->     <AREA SHAPE="RECT" COORDS="432, 9, 492, 30" HREF="../../../../devworld.shtml">     </MAP><P><A HREF="NPG2-274.html"><IMG ALIGN = BOTTOM SRC = "graphics/prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="NPG2-2.html"><IMG ALIGN = BOTTOM SRC = "graphics/content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="NPG2-443.html"><IMG ALIGN = BOTTOM SRC = "graphics/index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="NPG2-276.html"><IMG ALIGN = BOTTOM SRC = "graphics/next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P><FONT SIZE=-1><DL><DT><A HREF="../../techinfo.html"><B>Newton Developer Technical Information:</B></A> <A HREF="NPG2-2.html"><B>Newton Programmer's Guide: 2.1 OS Addendum</B></A> / <BR><DD><A HREF="NPG2-262.html"><B>Chapter 7 - Sound</B></A> / <A HREF="NPG2-274.html"><B>Using Sound</B></A></DL></FONT><P><HR><BLOCKQUOTE><A NAME=HEADING275-0></A><H2><A NAME=MARKER-9-106></A>Using the protoRecorderView</H2> The system includes a new proto, <A HREF=NPG2-299.html#MARKER-9-155><EM>*</EM></A><CODE>protoRecorderView</CODE>, that implements a simple user interface object to record and play sounds. The proto incorporates all the code necessary to record and play sounds. You can use this proto to add sound recording and playback capabilities to any application by embedding it in a view in the application. The proto is shown in <A HREF=#MARKER-9-107>Figure 7-3</A>.<P><B>Figure 7-3  <A NAME=MARKER-9-107></A>protoRecorderView</B><P><IMG ALIGN = BOTTOM SRC = "graphics/pRecView.jpg"><BR><BR> You retrieve the sound data recorded in a <A HREF=NPG2-299.html#MARKER-9-155><EM>*</EM></A><CODE>protoRecorderView</CODE> by sending the view the <A HREF=NPG2-300.html#MARKER-9-158><EM>*</EM></A><CODE>GetSounds</CODE> message. This method returns the array of sound frames recorded.<P> The recorder (<A HREF=NPG2-299.html#MARKER-9-155><EM>*</EM></A><CODE>protoRecorderView</CODE>) has an internal state that changes when the user taps one of its buttons. Each time there's an event that causes a state change, the recorder sends a <A HREF=NPG2-301.html#MARKER-9-160><EM>*</EM></A><CODE>SetState</CODE> message to the <CODE>statusText</CODE> slot in the view. By default the <CODE>statusText</CODE> slot is <CODE>nil</CODE>. You can catch state changes by implementing a <CODE>statusText</CODE> slot that contains a frame that contains a <CODE><A HREF=NPG2-301.html#MARKER-9-160><EM>*</A>SetState</EM></CODE> method. For example, here is how you could implement such a frame to handle the <A HREF=NPG2-301.html#MARKER-9-160><EM>*</EM></A><CODE>SetState</CODE> message.<P><PRE><P> myProtoRecorderView.ViewSetupFormScript := func()<P>beginself.statusText := {   _parent: self,  // only if you want to call inherited   SetState: func(oldState, newState, hasSound)      begin      // do your work here      // for example, catch a transition to the stopped state      // and call GetSounds to retrieve the recorded sounds      end,   } end;<P><P></PRE> The <A HREF=NPG2-301.html#MARKER-9-160><EM>*</EM></A><CODE>SetState</CODE> method is called with three parameters. The first, (<CODE>oldState</CODE> in the example) is an integer representing the recorder's previous state; the second (<CODE>newState</CODE> in the example) is an integer representing the recorder's new state; and the third (<CODE>hasSound</CODE> in the example) is a Boolean that is <CODE>true</CODE> if the recorder currently has some sound frames defined. This last parameter allows you to determine if the recorder view has any data to play (Boolean is <CODE>true</CODE>), or if it has none (Boolean is <CODE>nil</CODE>).<P> The first two parameters to <A HREF=NPG2-301.html#MARKER-9-160><EM>*</EM></A><CODE>SetState</CODE> (<CODE>oldState</CODE> and <CODE>newState</CODE> in the example) can have the following values:<P><PRE><P> kInactive := 1;        // default state (stopped)<P>kRecording := 2;       // sent before recording is startedkPlaying := 4;         // sent before playing is startedkPlayPaused := 8;      // sent before playing is pausedkRecordPaused := 16;   // sent before recording is pausedkStopping := 32;       // sent before the sound channel is stopped kSetupStore := 64;     // sent before recording is started<P><P></PRE> The <CODE>kSetupStore</CODE> state indicates that recording is about to start. After the <CODE>kSetupStore</CODE> message is sent, the state is immediately set back to <CODE>kInactive</CODE>. The <CODE>kStopping</CODE> value indicates that recording or playback is about to stop. After it has completely stopped, the state is set to <CODE>kInactive</CODE>.<P> If you want to explicitly set the store where recorded sounds are stored by the recorder view, you can set the slot <CODE><A HREF=NPG2-299.html#MARKER-9-155><EM>*</A>protoRecorderView.RecordEngine.fStore</EM></CODE> to the destination store. Otherwise the default store is used for recorded sounds (in VBOs).<P></BLOCKQUOTE><HR><center><A HREF="NPG2-274.html"><IMG ALIGN = BOTTOM SRC = "graphics/prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="NPG2-2.html"><IMG ALIGN = BOTTOM SRC = "graphics/content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="NPG2-443.html"><IMG ALIGN = BOTTOM SRC = "graphics/index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="NPG2-276.html"><IMG ALIGN = BOTTOM SRC = "graphics/next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P><center><font size=-1><A HREF="NPG2-3.html">&copy; Apple Computer, Inc.</A><br>26 APR 1997<P><!--------------------------- Navigation Area ----------------------------------><BR><!-- Navigation Area --><BR><A HREF="reference to server cgi goes here"><IMG BORDER="0" SRC="../../../../images/nav.gif" WIDTH="500" HEIGHT="32" ALT="Navigation graphic, see text links" ISMAP USEMAP="#nav"></A><BR><P><A HREF="../../../../devworld.shtml">Main</A> | <A HREF="../../techinfo.html">Top of Section</A> | <A HREF="../../newtondev.shtml#WhatsNew">What's New</A> | <A HREF="http://www.apple.com/">Apple Computer, Inc.</A> |<A HREF="../../../../find.html">Find It</A> | <A HREF="../../feedback.html">Feedback</A> | <A HREF="../../../../help.html">Help</A></FONT><P></CENTER><!-- Don't forget to add the necessary links for each of these items. --><BR><MAP NAME="nav"><!-- client side map for www.apple.com nav.gif --><!-- Main --><AREA SHAPE="RECT" COORDS="9,6,70,25" HREF="../../../../devworld.shtml"><!-- Page One --><AREA SHAPE="RECT" COORDS="80,6,142,25" HREF="../../techinfo.html"><!-- What's New --><AREA SHAPE="RECT" COORDS="150,5,211,25" HREF="../../newtondev.shtml#WhatsNew"><!-- Apple Logo --><AREA SHAPE="RECT" COORDS="220,6,280,25" HREF="http://www.apple.com/"><!-- Find It --><AREA SHAPE="RECT" COORDS="290,5,350,26" HREF="../../../../find.html"><!-- Contact Us --><AREA SHAPE="RECT" COORDS="361,5,422,25" HREF="../../feedback.html"><!-- Help --><AREA SHAPE="RECT" COORDS="430,5,492,25" HREF="../../../../help.html"><!-- DEFAULT AREA NOT SUPPORTED BY CLIENT SIDE IMAGEMAPS! --></MAP><P></BODY></HTML> 