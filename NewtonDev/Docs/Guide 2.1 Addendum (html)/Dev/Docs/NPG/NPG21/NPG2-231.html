<!-- Generated by Harlequin WebMaker 2.3.1 (16-Oct-1996)Macintosh Common Lisp Version 4.0 --><HTML> <HEAD><TITLE>Gray Transfer Modes</TITLE></HEAD><BODY><A NAME=HEADING231></A><CENTER>     <IMG BORDER="0" SRC="../../../../images/level3.gif" ALT="Title Banner"      ISMAP USEMAP="#level3">     <BR>     <MAP NAME="level3">     <!-- Find It -->     <AREA SHAPE="RECT" COORDS="7, 9, 69, 30" HREF="../../../../find.html">     <!-- Main -->     <AREA SHAPE="RECT" COORDS="432, 9, 492, 30" HREF="../../../../devworld.shtml">     </MAP><P><A HREF="NPG2-230.html"><IMG ALIGN = BOTTOM SRC = "graphics/prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="NPG2-2.html"><IMG ALIGN = BOTTOM SRC = "graphics/content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="NPG2-443.html"><IMG ALIGN = BOTTOM SRC = "graphics/index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="NPG2-232.html"><IMG ALIGN = BOTTOM SRC = "graphics/next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P><FONT SIZE=-1><DL><DT><A HREF="../../techinfo.html"><B>Newton Developer Technical Information:</B></A> <A HREF="NPG2-2.html"><B>Newton Programmer's Guide: 2.1 OS Addendum</B></A> / <BR><DD><A HREF="NPG2-213.html"><B>Chapter 6 - Drawing and Graphics 2.1</B></A> / <A HREF="NPG2-225.html"><B>Using Drawing and Graphics in the Newton 2.1 OS</B></A></DL></FONT><P><HR><BLOCKQUOTE><A NAME=HEADING231-0></A><H2><A NAME=MARKER-9-26></A>Gray Transfer Modes</H2> The transfer modes are used to specify how a graphic object is drawn onto an existing bitmap, usually the screen. The system combines the two images at the pixel level, combining the images with the operation specified in the transfer mode. The transfer mode constants are described in <A HREF=NPG2-239.html#MARKER-9-36>&quot;Transfer Mode Constants&quot;</A>.<P> The effect of the different transfer modes is illustrated in <A HREF=#MARKER-9-27>Figure 6-6</A>.<P><B>Figure 6-6  <A NAME=MARKER-9-27></A>Two bitmaps combined with the different transfer modes</B><P><IMG ALIGN = BOTTOM SRC = "graphics/GTransfr.jpg"><BR><BR> The value of the individual pixels is determined by first looking up the value in the color lookup table. If the default color table is used, no lookup is required as the indices and the tones are identical. Secondly, the source bitmap must be changed to the bit depth of the destination bitmap. Then the source bitmap is scaled, if necessary. Finally the individual pixels are combined as indicated by the transfer mode. <P> In most cases, you do not need to worry about how it is that the source bitmap is scaled (in both size and bit depth). Some of the transfer modes, <CODE>modeXor</CODE> and <CODE>modeBic</CODE>, operate by a bitwise combination of the pixel values. These transfer modes are most useful when using black and white sources, and have unexpected results when combining grays. Using <CODE>modeBic</CODE> is especially useful for drawing white text over a black or gray background.<P> If you do wish to use these transfer modes with two shades of gray, and you want to understand what the result will be, you must consider the effect of scaling the source bitmap. This information is provided in <A HREF=#MARKER-9-28>"How the System Scales Bitmaps."</A> <P><A NAME=HEADING231-8></A><H3><A NAME=MARKER-9-28></A>How the System Scales Bitmaps</H3> Before two bitmaps can be merged, the two bitmaps must be made to agree in bit depth, and the source bitmap may need to be scaled. The source bitmap is always the one to be shrunk or enlarged to match the destination bit depth.<P> If the source bitmap needs to be shrunk in size, it is partitioned into as many groups of pixels as are desired, and the darkest pixel in each source group is used. For example, if a 4-bit scan line contains the indices <CODE>0x56 34 A2 C8</CODE>..., and is being shrunk 50%, the indices <CODE>0x64AC</CODE>... are used. The darkest of each 2 pixel group is used. Since the following scan line of source data will also be combined with the current line, this algorithm is repeated, and the darkest of each 2x2 block of source pixels is mapped to each destination pixels.<P> When the source bitmap is expanded to fit a larger destination bitmap, pixels are repeated as necessary. For example if the same <CODE>0x56 34 A2 C8</CODE>... scan line is being increased horizontally by 100%, the individual pixels are simply repeated to produce <CODE>0x55663344AA22CC88</CODE>... <P> When the bit depth of the source bitmap is reduced or increased, it is necessarily changed by a power of 2. If the bitmap is being expanded, the pixel's bit patterns are simply repeated. For example if a pixel with the 2-bit binary value 01 is being increase to 4-bits, the zero is repeated and the one is repeated to produce the binary value <CODE>0011</CODE>. The 2-bit pixel 01 is expanded to the 8-bit pixel 00001111.<P> If a bitmap is being reduced in bit depth, the high bits of each pixel is used. For example, an 8-bit scan line <CODE>0x08 17 28 A5</CODE>... is reduced to the four-bit scan line <CODE>0x012A</CODE>... As a further example, the 8-bit pixel <CODE>0xA2</CODE> (binary 10100010) is reduced to the 4-bit pixel 1010 and to the 2-bit pixel 10.<P> Once the two bitmaps have been made to agree in bit depth and size, the affect of the transfer modes can be established. These are described in <A HREF=NPG2-239.html#MARKER-9-36>&quot;Transfer Mode Constants&quot;</A>.<P></BLOCKQUOTE><HR><center><A HREF="NPG2-230.html"><IMG ALIGN = BOTTOM SRC = "graphics/prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="NPG2-2.html"><IMG ALIGN = BOTTOM SRC = "graphics/content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="NPG2-443.html"><IMG ALIGN = BOTTOM SRC = "graphics/index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="NPG2-232.html"><IMG ALIGN = BOTTOM SRC = "graphics/next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P><center><font size=-1><A HREF="NPG2-3.html">&copy; Apple Computer, Inc.</A><br>26 APR 1997<P><!--------------------------- Navigation Area ----------------------------------><BR><!-- Navigation Area --><BR><A HREF="reference to server cgi goes here"><IMG BORDER="0" SRC="../../../../images/nav.gif" WIDTH="500" HEIGHT="32" ALT="Navigation graphic, see text links" ISMAP USEMAP="#nav"></A><BR><P><A HREF="../../../../devworld.shtml">Main</A> | <A HREF="../../techinfo.html">Top of Section</A> | <A HREF="../../newtondev.shtml#WhatsNew">What's New</A> | <A HREF="http://www.apple.com/">Apple Computer, Inc.</A> |<A HREF="../../../../find.html">Find It</A> | <A HREF="../../feedback.html">Feedback</A> | <A HREF="../../../../help.html">Help</A></FONT><P></CENTER><!-- Don't forget to add the necessary links for each of these items. --><BR><MAP NAME="nav"><!-- client side map for www.apple.com nav.gif --><!-- Main --><AREA SHAPE="RECT" COORDS="9,6,70,25" HREF="../../../../devworld.shtml"><!-- Page One --><AREA SHAPE="RECT" COORDS="80,6,142,25" HREF="../../techinfo.html"><!-- What's New --><AREA SHAPE="RECT" COORDS="150,5,211,25" HREF="../../newtondev.shtml#WhatsNew"><!-- Apple Logo --><AREA SHAPE="RECT" COORDS="220,6,280,25" HREF="http://www.apple.com/"><!-- Find It --><AREA SHAPE="RECT" COORDS="290,5,350,26" HREF="../../../../find.html"><!-- Contact Us --><AREA SHAPE="RECT" COORDS="361,5,422,25" HREF="../../feedback.html"><!-- Help --><AREA SHAPE="RECT" COORDS="430,5,492,25" HREF="../../../../help.html"><!-- DEFAULT AREA NOT SUPPORTED BY CLIENT SIDE IMAGEMAPS! --></MAP><P></BODY></HTML> 